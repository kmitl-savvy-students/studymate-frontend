<ng-container>
	<div class="my-6">
		<h2 class="text-xl font-semibold">ข้อมูลจาก Transcript ของท่าน</h2>
		<h3 class="text-sm opacity-50">คุณ {{ currentUser?.firstname }} {{ currentUser?.lastname }}</h3>
	</div>
	<ng-container *ngIf="!transcript && !isFetchingTranscriptDetails">
		<div class="text-semibold rounded-3xl border bg-gradient-to-r from-indigo-50 to-blue-50 p-12 text-center text-lg">กรุณาอัปโหลดไฟล์ Transcript เพื่อดูข้อมูลส่วนนี้</div>
	</ng-container>
	<div *ngIf="transcript || isFetchingTranscriptDetails">
		<div class="rounded-xl border border-gray-200 px-10 py-6">
			<div *ngIf="isFetchingTranscriptDetails" class="animate-pulse">
				<div class="mb-4 h-20 w-full rounded-md bg-primary-100"></div>
				<div class="mb-4 h-20 w-full rounded-md bg-primary-100"></div>
				<div class="mb-4 h-20 w-full rounded-md bg-primary-100"></div>
				<div class="mb-4 h-20 w-full rounded-md bg-primary-100"></div>
				<div class="mb-4 h-20 w-full rounded-md bg-primary-100"></div>
				<div class="mb-4 h-20 w-full rounded-md bg-primary-100"></div>
				<div class="mb-4 h-20 w-full rounded-md bg-primary-100"></div>
				<div class="mb-4 h-20 w-full rounded-md bg-primary-100"></div>
				<div class="mb-4 h-20 w-full rounded-md bg-primary-100"></div>
				<div class="mb-4 h-20 w-full rounded-md bg-primary-100"></div>
			</div>
			<div *ngFor="let transcriptDetails of groupedTranscriptDetails; let i = index">
				<div *ngIf="transcriptDetails.year === 0">
					<sdm-base-accordion header="หน่วยกิตเทียบโอน" subHeader="Transfer Credit" accordionId="transfer-credit-acc" [accordionDefaultStatus]="true">
						<div class="my-3">
							<sdm-subject-list-card [transcriptDetails]="transcriptDetails.details"></sdm-subject-list-card>
						</div>
					</sdm-base-accordion>
				</div>
				<div *ngIf="transcriptDetails.year !== 0">
					<sdm-base-accordion
						header="ผลการเรียน ปีการศึกษา พ.ศ. {{ transcriptDetails.year + 543 }}"
						subHeader="ภาคเรียนที่ {{ transcriptDetails.term }}"
						accordionId="transfer-credit-acc-{{ transcriptDetails.year + 543 }}-{{ transcriptDetails.term }}"
						[accordionDefaultStatus]="i === getFirstNonZeroYearIndex()">
						<div class="my-3">
							<sdm-subject-list-card [transcriptDetails]="transcriptDetails.details"></sdm-subject-list-card>
						</div>
					</sdm-base-accordion>
				</div>
			</div>
		</div>
	</div>
</ng-container>
