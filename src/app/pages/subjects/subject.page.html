<div class="flex w-full gap-x-5">
	<sdm-filter-bar [selectedCurriculum]="selectedCurriculumData" [isLoading]="isLoading" (selectedDays)="onSelectedDaysChange($event)" (ratingFilter)="onReviewFilterValueChange($event)" class="flex-none"></sdm-filter-bar>
	<div class="flex w-full flex-col">
		<div class="flex w-full flex-col">
			<div class="grid w-full flex-none grid-cols-1 gap-3">
				<!-- <div class="text-xl font-semibold">รายวิชาเรียน</div> -->
			<sdm-base-accordion header="ค้นหารายวิชาเรียน" accordionId="selectDropdown-acc" [accordionDefaultStatus]="true">
					<div class="w-full border-t-2 border-gray-100">
						<label class="inline-flex max-w-full cursor-pointer items-center overflow-x-auto rounded-md py-2 pl-1">
							<input type="checkbox" class="peer sr-only" (change)="toggleIsGened()" [checked]="isGened === '1'" />
							<div
								class="peer relative h-7 w-14 rounded-xl bg-main-10 after:absolute after:start-[4px] after:top-0.5 after:h-6 after:w-6 after:rounded-full after:border after:border-gray-200 after:bg-white after:transition-all after:content-[''] peer-checked:bg-main-100 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rtl:peer-checked:after:-translate-x-full"></div>
							<span class="ms-3 text-base font-medium text-dark-100">แสดงข้อมูลเฉพาะรายวิชาหมวดศึกษาทั่วไป</span>
						</label>

						<div class="grid grid-cols-4 gap-x-3 gap-y-2 px-3 pl-1">
							<sdm-select defaultLabel="ปีการศึกษา" SelectName="selectedYear" [listOptions]="yearsList" (selectedValue)="handleSelectChange('selectedYear',$event)" class="col-span-1" [disabled]="isLoading"></sdm-select>
							<sdm-select
								defaultLabel="ภาคการศึกษา"
								SelectName="selectedSemester"
								[listOptions]="semesterList"
								(selectedValue)="handleSelectChange('selectedSemester',$event)"
								class="col-span-1"
								[disabled]="isLoading"></sdm-select>
							<sdm-select
								defaultLabel="ชั้นปี"
								SelectName="selectedClassYear"
								[listOptions]="classYearList"
								(selectedValue)="handleSelectChange('selectedClassYear',$event)"
								class="col-span-1"
								[disabled]="isLoading"></sdm-select>
							<sdm-select defaultLabel="คณะ" SelectName="selectedFaculty" [listOptions]="facultyList" (selectedValue)="handleSelectChange('selectedFaculty',$event)" class="col-span-1" [disabled]="isLoading"></sdm-select>
							<sdm-select
								defaultLabel="ภาควิชา"
								SelectName="selectedDepartment"
								[listOptions]="departmentList"
								(selectedValue)="handleSelectChange('selectedDepartment',$event)"
								class="col-span-2"
								[disabled]="disableDepartmentSelectDropdown || isLoading"></sdm-select>
							<sdm-select
								defaultLabel="แผนการเรียน"
								SelectName="selectedProgram"
								[listOptions]="programList"
								(selectedValue)="handleSelectChange('selectedProgram',$event)"
								class="col-span-2"
								[disabled]="disableProgramSelectDropdown || isLoading"></sdm-select>
							<sdm-select
								defaultLabel="หลักสูตร"
								SelectName="selectedCurriculum"
								[listOptions]="curriculumList"
								(selectedValue)="handleSelectChange('selectedCurriculum',$event)"
								class="col-span-4"
								[disabled]="disableCurriculumSelectDropdown || isLoading"></sdm-select>
						</div>
					</div>
				</sdm-base-accordion>

				<sdm-search-bar [data]="subjectCardData" [filterFunction]="searchFunction" (searchedDataList)="getSearchedSubjectCardDataList($event)"></sdm-search-bar>
			</div>
		</div>
		<ng-container *ngIf="isSelectAllDropdown && isLoading">
			<div class="flex w-full animate-pulse flex-col items-center justify-center pt-4">
				<!-- loading website -->
				<div class="mb-4 h-52 w-full rounded-xl bg-primary-100"></div>
				<div class="mb-4 h-52 w-full rounded-xl bg-primary-100"></div>
				<div class="mb-4 h-52 w-full rounded-xl bg-primary-100"></div>
				<div class="mb-4 h-52 w-full rounded-xl bg-primary-100"></div>
				<!-- loading website -->
			</div>
		</ng-container>
		<ng-container *ngIf="isSelectAllDropdown && (paginatedItems.length > 0) && !getSubjectDataIsNull && !isLoading">
			<div class="flex w-full flex-col items-start">
				<div class="flex w-full flex-1 flex-col items-center gap-3 text-dark-75">
					<sdm-pagination (pageChange)="changePage($event)" [totalItems]="subjectCardTotal" [itemsPerPage]="itemsPerPage" [currentPage]="currentPage" class="mt-4"></sdm-pagination>
					<div class="grid w-full grid-cols-1 gap-4">
						<ng-container *ngFor="let data of paginatedItems; let i = index" class="grid grid-cols-1 gap-4">
							<ng-container *ngIf="data && data.subject && data.subject.id">
								<sdm-subject-cpn
									[subjectCardData]="data"
									[selectedYear]="selectedYear-543"
									[selectedSemester]="selectedSemester"
									[selectedCurriculum]="selectedCurriculum"
									[subjectId]="data.subject.id"
									[section]="data.section"></sdm-subject-cpn>
							</ng-container>
						</ng-container>
					</div>
					<sdm-pagination (pageChange)="changePage($event)" [totalItems]="subjectCardTotal" [itemsPerPage]="itemsPerPage" [currentPage]="currentPage"></sdm-pagination>
				</div>
			</div>
		</ng-container>
		<ng-container *ngIf="isSearched && searchSubjectDataIsNull && isSelectAllDropdown && (paginatedItems.length === 0) && !isLoading  && !getSubjectDataIsNull">
			<div class="flex w-full flex-1 flex-col items-center justify-center gap-3 p-20 text-center text-dark-75">ไม่พบข้อมูลรายวิชาที่ค้นหา</div>
		</ng-container>
		<ng-container *ngIf="isSelectAllDropdown && getSubjectDataIsNull">
			<div class="flex w-full flex-1 flex-col items-center justify-center gap-3 p-20 text-center text-dark-75">ไม่พบข้อมูลรายวิชา</div>
		</ng-container>
		<!-- คำแนะนำการดูรายวิชา -->
		<ng-container *ngIf="!isSelectAllDropdown">
			<div class="mt-20 flex w-full flex-col items-center justify-center gap-3 text-center text-dark-75">
				<div class="flex flex-col gap-y-4 text-sm">
					<div *ngIf="selectedYear === -1 || selectedYear === undefined">โปรดเลือกปีการศึกษา เพื่อดูรายวิชา</div>
					<div *ngIf="selectedSemester === -1 || selectedSemester === undefined">โปรดเลือกภาคการศึกษา เพื่อดูรายวิชา</div>
					<div *ngIf="selectedClassYear === '' || selectedClassYear === '-1' || selectedClassYear === undefined">โปรดเลือกชั้นปี เพื่อดูรายวิชา</div>
					<div *ngIf="selectedFaculty === -1 || selectedFaculty === undefined">โปรดเลือกคณะ เพื่อดูรายวิชา</div>
					<div *ngIf="(selectedDepartment === -1 || selectedDepartment === undefined) && selectedFaculty !== 0">โปรดเลือกภาควิชา เพื่อดูรายวิชา</div>
					<div *ngIf="(selectedProgram === -1 || selectedProgram === undefined) && selectedFaculty !== 0">โปรดเลือกแผนการเรียน เพื่อดูรายวิชา</div>
					<div *ngIf="(selectedCurriculum === -1 ||selectedCurriculum === undefined) && selectedFaculty !== 0">โปรดเลือกหลักสูตร เพื่อดูรายวิชา</div>
				</div>
			</div>
		</ng-container>
	</div>
</div>
<!-- <sdm-subject-added-modal
	modalID="subject-added-modal"
	headerModal="รายวิชาที่เพิ่ม"
	[subjects_added]="subjects_added"
>
</sdm-subject-added-modal> -->
